(()=>{"use strict";var e={n:l=>{var a=l&&l.__esModule?()=>l.default:()=>l;return e.d(a,{a}),a},d:(l,a)=>{for(var t in a)e.o(a,t)&&!e.o(l,t)&&Object.defineProperty(l,t,{enumerable:!0,get:a[t]})},o:(e,l)=>Object.prototype.hasOwnProperty.call(e,l)};const l=window.wp.blocks,a=window.wp.element,t=window.wp.serverSideRender;var n=e.n(t);const o=window.wp.blockEditor,s=window.wp.components,i=window.wp.hooks,c=window.wp.data;function r(e,l){var a,t,n={},o=[];for(t=0;t<e.length;t+=1)n[e[t].id]=t,e[t].children=[];for(t=0;t<e.length;t+=1)(a=e[t]).parent==l?o.push(a):n.hasOwnProperty(a.parent)&&e[n[a.parent]].children.push(a);return o}function d(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";var t;for(t=0;t<e.length;t+=1)l.push({label:a+e[t].name,value:e[t].id}),e[t].children.length>0&&d(e[t].children,l,a.trim()+"— ");return l}const _=JSON.parse('{"u2":"acadp/listings"}');(0,l.registerBlockType)(_.u2,{attributes:{view:{type:"string",default:acadp_blocks.listings.view},location:{type:"number",default:acadp_blocks.listings.location},category:{type:"number",default:acadp_blocks.listings.category},columns:{type:"number",default:acadp_blocks.listings.columns},listings_per_page:{type:"number",default:acadp_blocks.listings.listings_per_page},filterby:{type:"string",default:acadp_blocks.listings.filterby},orderby:{type:"string",default:acadp_blocks.listings.orderby},order:{type:"string",default:acadp_blocks.listings.order},featured:{type:"boolean",default:acadp_blocks.listings.featured},header:{type:"boolean",default:acadp_blocks.listings.header},show_excerpt:{type:"boolean",default:acadp_blocks.listings.show_excerpt},show_category:{type:"boolean",default:acadp_blocks.listings.show_category},show_location:{type:"boolean",default:acadp_blocks.listings.show_location},show_price:{type:"boolean",default:acadp_blocks.listings.show_price},show_date:{type:"boolean",default:acadp_blocks.listings.show_date},show_user:{type:"boolean",default:acadp_blocks.listings.show_user},show_views:{type:"boolean",default:acadp_blocks.listings.show_views},show_custom_fields:{type:"boolean",default:acadp_blocks.listings.show_custom_fields},pagination:{type:"boolean",default:acadp_blocks.listings.pagination}},edit:function(e){let{attributes:l,setAttributes:t}=e;const{view:_,category:b,location:g,columns:p,listings_per_page:u,filterby:h,orderby:w,order:k,featured:m,header:y,show_excerpt:f,show_category:v,show_location:E,show_price:C,show_date:R,show_user:P,show_views:T,show_custom_fields:S,pagination:x}=l,O=(0,c.useSelect)((e=>{const l=e("core").getEntityRecords("taxonomy","acadp_locations",{per_page:-1});let a=[{label:"— "+acadp_blocks.listings.i18n.location_none+" —",value:0}];if(l&&l.length>0){let e=d(r(l,parseInt(acadp_blocks.base_location)));a=[...a,...e]}return a})),B=(0,c.useSelect)((e=>{const l=e("core").getEntityRecords("taxonomy","acadp_categories",{per_page:-1});let a=[{label:"— "+acadp_blocks.listings.i18n.category_none+" —",value:0}];if(l&&l.length>0){let e=d(r(l,0));a=[...a,...e]}return a})),N=(0,a.useRef)();return(0,a.useEffect)((()=>{N.current?(0,i.doAction)("acadp_init_listings",l):N.current=!0})),(0,a.createElement)(a.Fragment,null,(0,a.createElement)(o.InspectorControls,null,(0,a.createElement)(s.PanelBody,{title:acadp_blocks.listings.i18n.panel_settings},(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.SelectControl,{label:acadp_blocks.listings.i18n.view_label,value:_,options:[{label:acadp_blocks.listings.i18n.view_list,value:"list"},{label:acadp_blocks.listings.i18n.view_grid,value:"grid"},{label:acadp_blocks.listings.i18n.view_map,value:"map"}],onChange:e=>t({view:e})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.SelectControl,{label:acadp_blocks.listings.i18n.location_label,value:g,options:O,onChange:e=>t({location:Number(e)})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.SelectControl,{label:acadp_blocks.listings.i18n.category_label,value:b,options:B,onChange:e=>t({category:Number(e)})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.RangeControl,{label:acadp_blocks.listings.i18n.columns_label,value:p,min:1,max:12,onChange:e=>t({columns:e})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.RangeControl,{label:acadp_blocks.listings.i18n.listings_per_page_label,help:acadp_blocks.listings.i18n.listings_per_page_help,value:u,min:1,max:100,onChange:e=>t({listings_per_page:e})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.SelectControl,{label:acadp_blocks.listings.i18n.filterby_label,value:h,options:[{label:acadp_blocks.listings.i18n.filterby_none,value:""},{label:acadp_blocks.listings.i18n.filterby_featured,value:"featured"}],onChange:e=>t({filterby:e})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.SelectControl,{label:acadp_blocks.listings.i18n.orderby_label,value:w,options:[{label:acadp_blocks.listings.i18n.orderby_title,value:"title"},{label:acadp_blocks.listings.i18n.orderby_date,value:"date"},{label:acadp_blocks.listings.i18n.orderby_price,value:"price"},{label:acadp_blocks.listings.i18n.orderby_views,value:"views"},{label:acadp_blocks.listings.i18n.orderby_rand,value:"rand"}],onChange:e=>t({orderby:e})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.SelectControl,{label:acadp_blocks.listings.i18n.order_label,value:k,options:[{label:acadp_blocks.listings.i18n.order_asc,value:"asc"},{label:acadp_blocks.listings.i18n.order_desc,value:"desc"}],onChange:e=>t({order:e})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.ToggleControl,{label:acadp_blocks.listings.i18n.featured_label,help:acadp_blocks.listings.i18n.featured_help,checked:m,onChange:()=>t({featured:!m})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.ToggleControl,{label:acadp_blocks.listings.i18n.header_label,help:acadp_blocks.listings.i18n.header_help,checked:y,onChange:()=>t({header:!y})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.ToggleControl,{label:acadp_blocks.listings.i18n.show_excerpt_label,checked:f,onChange:()=>t({show_excerpt:!f})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.ToggleControl,{label:acadp_blocks.listings.i18n.show_category_label,checked:v,onChange:()=>t({show_category:!v})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.ToggleControl,{label:acadp_blocks.listings.i18n.show_location_label,checked:E,onChange:()=>t({show_location:!E})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.ToggleControl,{label:acadp_blocks.listings.i18n.show_price_label,checked:C,onChange:()=>t({show_price:!C})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.ToggleControl,{label:acadp_blocks.listings.i18n.show_date_label,checked:R,onChange:()=>t({show_date:!R})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.ToggleControl,{label:acadp_blocks.listings.i18n.show_user_label,checked:P,onChange:()=>t({show_user:!P})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.ToggleControl,{label:acadp_blocks.listings.i18n.show_views_label,checked:T,onChange:()=>t({show_views:!T})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.ToggleControl,{label:acadp_blocks.listings.i18n.show_custom_fields_label,checked:S,onChange:()=>t({show_custom_fields:!S})})),(0,a.createElement)(s.PanelRow,null,(0,a.createElement)(s.ToggleControl,{label:acadp_blocks.listings.i18n.pagination_label,checked:x,onChange:()=>t({pagination:!x})})))),(0,a.createElement)("div",(0,o.useBlockProps)(),(0,a.createElement)(s.Disabled,null,(0,a.createElement)(n(),{block:"acadp/listings",attributes:l}))))}})})();