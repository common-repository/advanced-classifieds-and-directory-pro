(()=>{"use strict";var e={n:l=>{var a=l&&l.__esModule?()=>l.default:()=>l;return e.d(a,{a}),a},d:(l,a)=>{for(var o in a)e.o(a,o)&&!e.o(l,o)&&Object.defineProperty(l,o,{enumerable:!0,get:a[o]})},o:(e,l)=>Object.prototype.hasOwnProperty.call(e,l)};const l=window.wp.blocks,a=window.wp.element,o=window.wp.serverSideRender;var n=e.n(o);const t=window.wp.blockEditor,c=window.wp.components,r=window.wp.hooks,s=window.wp.data;function i(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";var o;for(o=0;o<e.length;o+=1)l.push({label:a+e[o].name,value:e[o].id}),e[o].children.length>0&&i(e[o].children,l,a.trim()+"— ");return l}const d=JSON.parse('{"u2":"acadp/locations"}');(0,l.registerBlockType)(d.u2,{attributes:{parent:{type:"number",default:acadp_blocks.locations.parent},columns:{type:"number",default:acadp_blocks.locations.columns},depth:{type:"number",default:acadp_blocks.locations.depth},orderby:{type:"string",default:acadp_blocks.locations.orderby},order:{type:"string",default:acadp_blocks.locations.order},show_count:{type:"boolean",default:acadp_blocks.locations.show_count},hide_empty:{type:"boolean",default:acadp_blocks.locations.hide_empty}},edit:function(e){let{attributes:l,setAttributes:o}=e;const{parent:d,columns:p,depth:u,orderby:b,order:_,show_count:m,hide_empty:h}=l,w=(0,s.useSelect)((e=>{const l=e("core").getEntityRecords("taxonomy","acadp_locations",{per_page:-1});let a=[{label:"— "+acadp_blocks.locations.i18n.parent_label+" —",value:0}];if(l&&l.length>0){let e=function(e,l){var a,o,n={},t=[];for(o=0;o<e.length;o+=1)n[e[o].id]=o,e[o].children=[];for(o=0;o<e.length;o+=1)(a=e[o]).parent==l?t.push(a):n.hasOwnProperty(a.parent)&&e[n[a.parent]].children.push(a);return t}(l,parseInt(acadp_blocks.base_location)),o=i(e);a=[...a,...o]}return a})),k=(0,a.useRef)();return(0,a.useEffect)((()=>{k.current?(0,r.doAction)("acadp_init_locations",l):k.current=!0})),(0,a.createElement)(a.Fragment,null,(0,a.createElement)(t.InspectorControls,null,(0,a.createElement)(c.PanelBody,{title:acadp_blocks.locations.i18n.panel_settings},(0,a.createElement)(c.PanelRow,null,(0,a.createElement)(c.SelectControl,{label:acadp_blocks.locations.i18n.parent_label,value:d,options:w,onChange:e=>o({parent:Number(e)})})),(0,a.createElement)(c.PanelRow,null,(0,a.createElement)(c.RangeControl,{label:acadp_blocks.locations.i18n.columns_label,value:p,min:1,max:12,onChange:e=>o({columns:e})})),(0,a.createElement)(c.PanelRow,null,(0,a.createElement)(c.RangeControl,{label:acadp_blocks.locations.i18n.depth_label,value:u,min:1,max:12,onChange:e=>o({depth:e})})),(0,a.createElement)(c.PanelRow,null,(0,a.createElement)(c.SelectControl,{label:acadp_blocks.locations.i18n.orderby_label,value:b,options:[{label:acadp_blocks.locations.i18n.orderby_id,value:"id"},{label:acadp_blocks.locations.i18n.orderby_count,value:"count"},{label:acadp_blocks.locations.i18n.orderby_name,value:"name"},{label:acadp_blocks.locations.i18n.orderby_slug,value:"slug"}],onChange:e=>o({orderby:e})})),(0,a.createElement)(c.PanelRow,null,(0,a.createElement)(c.SelectControl,{label:acadp_blocks.locations.i18n.order_label,value:_,options:[{label:acadp_blocks.locations.i18n.order_asc,value:"asc"},{label:acadp_blocks.locations.i18n.order_desc,value:"desc"}],onChange:e=>o({order:e})})),(0,a.createElement)(c.PanelRow,null,(0,a.createElement)(c.ToggleControl,{label:acadp_blocks.locations.i18n.show_count_label,help:acadp_blocks.locations.i18n.show_count_help,checked:m,onChange:()=>o({show_count:!m})})),(0,a.createElement)(c.PanelRow,null,(0,a.createElement)(c.ToggleControl,{label:acadp_blocks.locations.i18n.hide_empty_label,help:acadp_blocks.locations.i18n.hide_empty_help,checked:h,onChange:()=>o({hide_empty:!h})})))),(0,a.createElement)("div",(0,t.useBlockProps)(),(0,a.createElement)(c.Disabled,null,(0,a.createElement)(n(),{block:"acadp/locations",attributes:l}))))}})})();